<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é’¢ç´éšæœºéŸ³å¬è¾¨ï¼ˆå°¤å…‹é‡Œé‡Œ 23å¯¸ 18å“ï¼‰</title>
<script src="js/Tone.js"></script>
<script type="module" src="modules/core/config.js"></script>
<script type="module" src="main.js"></script>
<script type="module" src="modules/core/boot.js"></script>

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="modules/modes/start-screen.css">
<link rel="stylesheet" href="modules/ui/stats-modal.css">
<link rel="stylesheet" href="mobile-standard.css">
<link rel="stylesheet" href="modules/quiz/history-panel.css">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<style>
/* å¯ç”¨é¡¶éƒ¨æ ‡é¢˜æ  */
.daw-header {
    display: flex;
    background: var(--card);
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    border-bottom: 1px solid var(--btn-sec);
    box-shadow: 0 2px 10px var(--shadow);
    height: 60px;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
}

.app-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
}

.app-title small {
    font-size: 14px;
    color: var(--sub);
    font-weight: 400;
    margin-left: 8px;
}

.header-controls {
    display: flex;
    gap: 8px;
    align-items: center;
    position: relative;
}

/* éšè—åŸæœ‰çš„åº•éƒ¨æŒ‰é’®ç»„ */
.btn-group {
    display: none !important;
}

.panel-section {
    margin-bottom: 24px;
}

.control-group {
    margin-bottom: 16px;
}

.control-label {
    display: block;
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--text);
    padding-bottom: 4px;
    border-bottom: 1px solid var(--btn-sec);
}


/* ç¡®ä¿æ ‡é¢˜æ ä¸­çš„å›¾æ ‡æŒ‰é’®æ ·å¼æ­£ç¡® */
.daw-header .icon-btn {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: var(--btn-sec);
    color: var(--text);
    cursor: pointer;
    transition: all 0.2s;
    font-size: 14px;
}

.daw-header .icon-btn:hover {
    background: var(--btn-sec-h);
}

/* éŸ³é‡æ§åˆ¶æ ·å¼ */
.daw-header .volume-control {
    position: relative;
    display: flex;
    align-items: center;
    height: 32px;
}

.daw-header .volume-slider-container {
    position: absolute;
    top: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%) translateY(-10px);
    background: var(--card);
    padding: 12px;
    border-radius: 10px;
    box-shadow: 0 4px 20px var(--shadow);
    border: 1px solid var(--btn-sec);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1000;
    min-width: 120px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.daw-header .volume-control:hover .volume-slider-container {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
}

.daw-header .volume-control.hide-slider .volume-slider-container {
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateX(-50%) translateY(-10px) !important;
}

.daw-header #volumeSlider {
    width: 90px;
    height: 5px;
    border-radius: 3px;
    background: var(--btn-sec);
    outline: none;
    cursor: pointer;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    margin: 0 auto;
}

/* Webkit æµè§ˆå™¨ (Chrome, Safari, Edge Chromium) */
.daw-header #volumeSlider::-webkit-slider-track {
    width: 100%;
    height: 5px;
    border-radius: 3px;
    background: var(--btn-sec);
    border: none;
}

.daw-header #volumeSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent-color);
    cursor: pointer;
    border: 2px solid var(--card);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    margin-top: -5.5px;
}

/* Firefox */
.daw-header #volumeSlider::-moz-range-track {
    width: 100%;
    height: 5px;
    border-radius: 3px;
    background: var(--btn-sec);
    border: none;
}

.daw-header #volumeSlider::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent-color);
    cursor: pointer;
    border: 2px solid var(--card);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    border: none;
}

.daw-header #volumeSlider::-webkit-slider-track {
    width: 100%;
    height: 5px;
    border-radius: 3px;
    background: var(--btn-sec);
    border: none;
}

.daw-header #volumeSlider::-webkit-slider-thumb {
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent-color);
    cursor: pointer;
    border: 2px solid var(--card);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    margin-top: -5.5px;
}

.daw-header .volume-slider-container::after {
    content: attr(data-volume);
    display: block;
    text-align: center;
    font-size: 11px;
    color: var(--sub);
    font-weight: 500;
    width: 100%;
    position: absolute;
    bottom: -18px;
    left: 0;
}

/* éšè—å¡ç‰‡å†…é‡å¤çš„è®¾ç½®é¡¹ */
#card .reference-controls .control-row:first-child,
#card .reference-controls .control-row:nth-child(2) {
    display: none;
}



/* ç¡®ä¿æ¨¡æ€æ¡†åœ¨æ ‡é¢˜æ ä¹‹ä¸Š */
#rangeModal,
#settingsModal {
    z-index: 1001;
}

#rangeMask,
#settingsMask {
    z-index: 1000;
}

/* é€‰æ‹©æ¡†æ ·å¼ */
select {
    width: 100%;
    padding: 8px 12px;
    border-radius: 6px;
    border: 1px solid var(--btn-sec);
    background: var(--card);
    color: var(--text);
    font-size: 14px;
}

/* æŒ‰é’®æ ·å¼ */
.btn-secondary {
    margin: 8px 0px;
    padding: 8px 16px;
    background: var(--btn-sec);
    color: var(--text);
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 14px;
}

.btn-secondary:hover {
    background: var(--btn-sec-h);
}
</style>
</head>
<body>
<!-- æµ®åŠ¨é¢æ¿ -->
<div id="simplePanel" class="simple-panel">
  <div class="panel-header">
    <div class="panel-title">éŸ³é«˜ä¿¡æ¯</div>
      <div class="panel-controls">
        <button class="panel-close" title="å…³é—­é¢æ¿">âœ•</button>
      </div>
  </div>
        
<!-- æ»‘åŠ¨å®¹å™¨ -->
<div class="swipe-container">

  <!-- éŸ³é«˜é¡µé¢ -->
  <div class="swipe-page active" id="pitch-page">
    <div class="welcome-overlay active">
      <div class="welcome-icon">ğŸµ</div>
        <h3 class="welcome-title">å¬éŸ³è¾¨è¯†</h3>
        <p class="welcome-subtitle">æ¢ç´¢éŸ³ä¹çš„ä¸–ç•Œï¼Œæå‡å¬éŸ³èƒ½åŠ›</p>
        <div class="welcome-swipe-hint">â—€ æ»‘åŠ¨æŸ¥çœ‹å…¶ä»–ä¿¡æ¯ â–¶</div>
      </div>
        
        <div class="pitch-content">
          <span class="dominant-pitch" id="currentPitch"></span>
          <span class="watermark-degree" id="currentDegree"></span>
          <span class="frequency-display" id="currentFrequency"></span>
        </div>
  </div>
    
    <!-- éŸ³ç¨‹é¡µé¢ -->
  <div class="swipe-page" id="interval-page">
    <div class="welcome-overlay active">
      <div class="welcome-icon">ğŸ¶</div>
        <h3 class="welcome-title">éŸ³ç¨‹åˆ†æ</h3>
        <p class="welcome-subtitle">äº†è§£éŸ³ç¬¦ä¹‹é—´çš„å’Œè°å…³ç³»</p>
        <div class="welcome-swipe-hint">â—€ æ»‘åŠ¨æŸ¥çœ‹å…¶ä»–ä¿¡æ¯ â–¶</div>
    </div>
        
    <div class="interval-content">
      <div class="interval-name" id="intervalName">--</div>
        <div class="interval-detail" id="intervalDetail">--</div>
          <div class="interval-properties">
            <div class="property-group">
              <div class="property-row">
                <span class="property-label">ç¨³å®šæ€§</span>
                <span class="property-value" id="intervalStability">--</span>
              </div>
              <div class="property-row">
                <span class="property-label">è§£å†³å€¾å‘</span>
                <span class="property-value" id="intervalTendency">--</span>
              </div>
            </div>
              <div class="property-group">
                <div class="property-row">
                  <span class="property-label">éŸ³ç¨‹æ€§è´¨</span>
                  <span class="property-value" id="intervalNature">--</span>
                </div>
                <div class="property-row">
                  <span class="property-label">è‰²å½©ç‰¹å¾</span>
                  <span class="property-value" id="intervalColor">--</span>
                </div>
              </div>
         </div>
        </div>
    </div>
    <!-- å°¤å…‹é‡Œé‡Œé¡µé¢ -->
    <div class="swipe-page" id="ukulele-page">
        <div class="welcome-overlay active">
            <div class="welcome-icon">ğŸ¸</div>
            <h3 class="welcome-title">å°¤å…‹é‡Œé‡ŒæŒ‡ä½</h3>
            <p class="welcome-subtitle">æ¢ç´¢éŸ³é«˜çš„å¤šç§æŒ‰æ³•</p>
            <div class="welcome-swipe-hint">â—€ æ»‘åŠ¨æŸ¥çœ‹å…¶ä»–ä¿¡æ¯ â–¶</div>
        </div>
        
        <div class="ukulele-content">
            <!-- ä¸»è¦ä¿¡æ¯åŒºåŸŸ - å·¦å³å¸ƒå±€ -->
            <div class="uke-main-info">
                <!-- å·¦ä¾§ï¼šéŸ³åä¿¡æ¯ + ä¸‹æ‹‰æ¡† -->
                <div class="uke-left-section">
                    <div class="uke-note-section">
                        <div class="uke-note-name">
                            <span class="uke-note" id="ukeNoteName">--</span>
                            <span class="uke-note-type" id="ukeNoteType">--</span>
                        </div>
                    </div>
                    <!-- è°ƒæ€§é€‰æ‹©å™¨æ”¾åœ¨éŸ³åæ­£ä¸‹æ–¹ -->
                    <div class="uke-key-selector">
                        <select id="ukeKeySelect" class="uke-key-dropdown">
                            <option value="C">Cè°ƒ</option>
                            <option value="D">Dè°ƒ</option>
                            <option value="E">Eè°ƒ</option>
                            <option value="F">Fè°ƒ</option>
                            <option value="G">Gè°ƒ</option>
                            <option value="A">Aè°ƒ</option>
                            <option value="B">Bè°ƒ</option>
                        </select>
                    </div>
                </div>
                
                <!-- å³ä¾§ï¼šæŒ‡ä½ä¿¡æ¯ -->
                <div class="uke-right-section">
                    <!-- å¸¸ç”¨æŒ‡ä½ -->
                    <div class="uke-position-group">
                        <div class="position-label">å¸¸ç”¨æŒ‡ä½</div>
                        <div class="position-values" id="ukeCommonPositions">--</div>
                    </div>
                    
                    <!-- é«˜æŠŠä½æŒ‡ä½ -->
                    <div class="uke-position-group">
                        <div class="position-label">é«˜æŠŠä½æŒ‡ä½</div>
                        <div class="position-values" id="ukeHighPositions">--</div>
                    </div>
                </div>
            </div>
            
            <!-- åº•éƒ¨ï¼šå’Œå¼¦ä¿¡æ¯ -->
            <div class="uke-chords-section">
                <div class="chords-label">ç›¸å…³å’Œå¼¦ï¼š</div>
                <div class="chords-values" id="ukeRelatedChords">--</div>
            </div>
        </div>
    </div>
        <!-- é¡µé¢æŒ‡ç¤ºå™¨ -->
        <div class="page-indicator">
            <span class="indicator-dot active" data-page="0"></span>
            <span class="indicator-dot" data-page="1"></span>
            <span class="indicator-dot" data-page="2"></span>
        </div>
        </div>
    </div> 
<!-- å¼€å§‹å±å¹•è¦†ç›–å±‚ -->
<div id="startScreen" class="start-screen active">
    <div class="start-container">
        <div class="app-brand">
            <h1>ğŸµ å•éŸ³å¬è¾¨è®­ç»ƒå™¨</h1>
            <p>æå‡éŸ³ä¹æ„ŸçŸ¥èƒ½åŠ›ï¼Œä»ç²¾å‡†å¬è¾¨å¼€å§‹</p>
        </div>

        <div class="mode-selection">
            <!-- æ ‡å‡†æ¨¡å¼å¡ç‰‡ -->
<div class="mode-card active" data-mode="standard"> 
    <div class="mode-icon">ğŸ¹</div>
    <div class="mode-content">
        <h3>æ ‡å‡†æ¨¡å¼</h3>
        <p>éšå¿ƒè®¾ç½®è°ƒæ€§ã€éŸ³åŸŸå’Œéš¾åº¦</p>
        <ul class="mode-features">
            <li>â€¢ å®Œæ•´çš„è‡ªå®šä¹‰è®¾ç½®</li>
            <li>â€¢ æ¸è¿›å¼éš¾åº¦è°ƒæ•´</li>
            <li>â€¢ å®æ—¶åé¦ˆå’Œç»Ÿè®¡</li>
        </ul>
    </div>
    <button class="select-mode-btn">è¿›å…¥ç»ƒä¹ </button>
</div>

            <!-- æŒ‘æˆ˜æ¨¡å¼å¡ç‰‡ -->
            <div class="mode-card" data-mode="challenge">
                <div class="mode-icon">âš¡</div>
                <div class="mode-content">
                    <h3>æŒ‘æˆ˜æ¨¡å¼</h3>
                    <p>é™æ—¶æŒ‘æˆ˜ï¼Œæµ‹è¯•ä½ çš„å¬è¾¨æé™</p>
                    <ul class="mode-features">
                        <li>â€¢ æ—¶é—´é™åˆ¶å’Œåˆ†æ•°ç³»ç»Ÿ</li>
                        <li>â€¢ é€æ­¥æå‡çš„éš¾åº¦æ›²çº¿</li>
                        <li>â€¢ æˆå°±å’Œæ’è¡Œæ¦œ</li>
                    </ul>
                </div>
                <button class="select-mode-btn">å¼€å§‹æŒ‘æˆ˜</button>
            </div>

            <!-- ä¸“é¡¹è®­ç»ƒå¡ç‰‡ -->
            <div class="mode-card" data-mode="focused">
                <div class="mode-icon">ğŸ¯</div>
                <div class="mode-content">
                    <h3>ä¸“é¡¹è®­ç»ƒ</h3>
                    <p>åˆ†æè–„å¼±ç¯èŠ‚ï¼Œé’ˆå¯¹æ€§å¼ºåŒ–è®­ç»ƒ</p>
                    <ul class="mode-features">
                        <li>â€¢ åŸºäºæ•°æ®çš„æ™ºèƒ½æ¨è</li>
                        <li>â€¢ ä¸ªæ€§åŒ–è®­ç»ƒè®¡åˆ’</li>
                        <li>â€¢ è¿›æ­¥è¿½è¸ªå’ŒæŠ¥å‘Š</li>
                    </ul>
                </div>
                <button class="select-mode-btn">å®šåˆ¶è®­ç»ƒ</button>
            </div>

            <!-- å¯¼èˆªä»£ç  -->
             <div class="mobile-cards-nav">
    <button class="nav-arrow nav-prev" aria-label="ä¸Šä¸€ä¸ª">
        ï¼œ
    </button>
    <div class="nav-indicator">
        <span class="nav-current">1</span>
        <span class="nav-separator">/</span>
        <span class="nav-total">3</span>
    </div>
    <button class="nav-arrow nav-next" aria-label="ä¸‹ä¸€ä¸ª">
        ï¼
    </button>
</div>
        </div>
        <!-- ç»Ÿè®¡æ•°æ® -->
        <div class="start-footer">
            <div class="quick-stats">
                <div class="stat">
                    <span class="stat-number" id="totalSessions">0</span>
                    <span class="stat-label">æ€»ç»ƒä¹ æ¬¡æ•°</span>
                </div>
                <div class="stat">
                    <span class="stat-number" id="currentStreak-num">0</span>
                    <span class="stat-label">è¿ç»­ç»ƒä¹ å¤©æ•°</span>
                </div>
                <div class="stat">
                    <span class="stat-number" id="bestAccuracy">0%</span>
                    <span class="stat-label">æœ€ä½³å‡†ç¡®ç‡</span>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="layout-grid-container">
<!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
<header class="daw-header">
<div class="header-left">
        <button id="returnToStart" class="icon-btn" title="è¿”å›å¼€å§‹å±å¹• (ESC)" style="display: none;">
            ğŸ 
        </button>
        <div class="app-title" style="cursor: pointer;" title="ç‚¹å‡»è¿”å›å¼€å§‹å±å¹•">
            å•éŸ³å¬è¾¨è®­ç»ƒå™¨ <small>æå‡éŸ³ä¹æ„ŸçŸ¥èƒ½åŠ›ï¼Œä»ç²¾å‡†å¬è¾¨å¼€å§‹</small>
        </div>
    </div>
    <div class="header-controls">
        <button id="themeToggle" class="icon-btn" title="åˆ‡æ¢æ—¥/å¤œæ¨¡å¼">
            <span class="icon sun">â˜€ï¸</span>
            <span class="icon moon">ğŸŒ™</span>
        </button>
        <!-- éŸ³é‡æ§åˆ¶ -->
        <div class="volume-control">
            <button id="volumeToggle" class="icon-btn" title="éŸ³é‡æ§åˆ¶">ğŸ”Š</button>
            <div class="volume-slider-container">
                <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.7">
            </div>
        </div>

        <button id="resetQuestionBtn" class="icon-btn" title="é‡ç½®å½“å‰é¢˜ç›®ï¼ˆRé”®ï¼‰">ğŸ”„</button>
        <button id="settingsBtn" class="icon-btn" title="è®¾ç½®">âš™ï¸</button>
    </div>
</header>
<!-- å·¦ä¾§è®¾ç½®é¢æ¿ -->
<aside class="left-panel">
    <div class="panel-section">
        <h3 class="panel-title">éŸ³åŸŸè®¾ç½®</h3>
        <div class="range-buttons">
            <button class="range-btn active" data-range="low">å°å­—ç»„</button>
            <button class="range-btn" data-range="mid">å°å­—ä¸€ç»„</button>
        </div>
    </div>

    <div class="panel-section">
        <h3 class="panel-title">åŸºå‡†éŸ³è®¾ç½®</h3>
        <div class="control-group">
        <!-- ç›´æ¥ä¿ç•™è¿™ä¸ªdivå’Œé‡Œé¢çš„æŒ‰é’® -->
        <div class="mode-buttons">
            <button class="mode-btn active" data-mode="c">å›ºå®šC</button>
            <button class="mode-btn" data-mode="a">å›ºå®šA</button>
        </div>
    </div>
        
        <div class="control-group">
            <label class="control-label">è°ƒæ€§</label>
            <select id="keySelect">
                <option value="C">Cè°ƒ</option>
                <option value="D">Dè°ƒ</option>
                <option value="E">Eè°ƒ</option>
                <option value="F">Fè°ƒ</option>
                <option value="G">Gè°ƒ</option>
                <option value="A">Aè°ƒ</option>
                <option value="B">Bè°ƒ</option>
            </select>
        </div>

        <div class="control-group">
            <label class="control-label">éš¾åº¦</label>
            <select id="difficultySelect">
                <option value="basic">ä»…åŸºæœ¬éŸ³çº§</option>
                <option value="extended">å«å˜åŒ–éŸ³çº§</option>
            </select>
        </div>
    </div>

    <div class="panel-section">
        <h3 class="panel-title">æ’­æ”¾é€‰é¡¹</h3>
        <div class="checkbox-option">
            <input type="checkbox" id="autoNextCheckbox">
            <label for="autoNextCheckbox">è‡ªåŠ¨ä¸‹ä¸€éŸ³</label>
            <input type="range" id="infoDisplayTime" min="1" max="5" value="3" class="time-slider" disabled>
            <span id="timeDisplay" style="opacity: 0.5; color: var(--text);">3ç§’</span>
        </div>
        <div class="checkbox-option">
            <input type="checkbox" id="enableScalePlayback" checked>
            <label for="enableScalePlayback">å…ˆæ’­æ”¾éŸ³é˜¶</label>
        </div>
    </div>
    <div id="customSamplingSection" style="display:none;">
        <div class="panel-section">
          <h3 class="panel-title">è‡ªå®šä¹‰é‡‡æ ·</h3>
          <button id="customBtn" class="btn-secondary" style="width:100%;margin-bottom:8px;">è‡ªå®šä¹‰é‡‡æ ·</button>
          <button id="resetBtn" class="btn-secondary" style="width:100%;">æ¢å¤é»˜è®¤é‡‡æ ·</button>
          <input type="file" id="fileIn" multiple accept="audio/*" style="display:none">
          <div id="samplingStatus" style="margin-top:12px;font-size:12px;color:var(--sub); display: none;"></div>
        </div>
    </div>
</aside>
<!-- ä¸­å¤®ä¸»åŒºåŸŸ -->
<main class="main-content">
    <div class="central-container">
        <!-- å¤§æ’­æ”¾æŒ‰é’® -->
        <div id="big-play-btn" class="big-play-button">
            <div class="big-play-icon icon-play"></div>
        </div>
    
        <!-- æ¶ˆæ¯æ˜¾ç¤º -->
        <div id="msg" style="display: block;">ç‚¹å‡»å¼€å§‹ç»ƒä¹ </div>
        
        <!-- æ·»åŠ é”®ç›˜æç¤º -->
        <div class="keyboard-hint" style="font-size: 12px; color: var(--sub);">
            ç©ºæ ¼é”®æ’­æ”¾ Â· Ré”®å¤ä½
        </div>
        
        <div id="statusBox"></div>
     <button id="startBtn" class="btn-primary" style="display: none;">æ’­æ”¾é¢˜ç›®</button>
     
     <div id="ans"></div>
    </div>
</main>

<!-- å³ä¾§é¢æ¿ -->
<!-- æ˜¾ç¤ºé¢æ¿æŒ‰é’® -->
<button id="showSimplePanel" class="icon-btn" style="display:none;">ğŸ“Š</button>

<aside class="right-panel">
    <div class="panel-section">
        <h3 class="panel-title">ç»ƒä¹ ç»Ÿè®¡</h3>

        <!-- ç»ƒä¹ ç»Ÿè®¡ -->
        <div class="key-metrics-simple">
            <div class="stats-section">
                <!-- æ€»ç»ƒä¹ æ•°é‡ -->
                <div class="stat-line">
                    <span class="stat-label">æ€»ç»ƒä¹ :</span>
                    <span class="stat-value" id="totalExercises">0é¢˜</span>
                </div>
                <div class="stat-line">
                    <span class="stat-label">æ€»æ­£ç¡®ç‡:</span>
                    <span class="stat-value" id="totalAccuracyRate">0%</span>
                </div>
                
                <!-- ä»Šæ—¥ç»Ÿè®¡ -->
                <div class="stat-line">
                    <span class="stat-label">ä»Šæ—¥ç»ƒä¹ :</span>
                    <span class="stat-value" id="totalPlays">0é¢˜</span>
                </div>
                <div class="stat-line">
                    <span class="stat-label">é¦–å‡»æ­£ç¡®:</span>
                    <span class="stat-value" id="correctCount">0é¢˜</span>
                </div>
                <div class="stat-line">
                    <span class="stat-label">é¦–å‡»æ­£ç¡®ç‡:</span>
                    <span class="stat-value" id="accuracyRate">0%</span>
                </div>
                <div class="progress-mini">
                    <div class="progress-fill-mini" id="accuracyProgress"></div>
                </div>
                
                <!-- è¿èƒœè®°å½• -->
                <div class="stat-line">
                    <span class="stat-label">å½“å‰è¿å‡»:</span>
                    <span class="stat-value" id="currentStreak-label">0è¿èƒœ</span>
                </div>
                <div class="stat-line">
                    <span class="stat-label">æœ€é«˜è¿å‡»:</span>
                    <span class="stat-value" id="maxStreak-label">0è¿èƒœ</span>
                </div>
                <button id="viewDetailsBtn" class="view-details-btn">
                    ğŸ“ˆ æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
                </button>
            </div>
        </div>

            
       
    </div>

    <!-- å†å²è®°å½• -->
    <div class="panel-section">
        <h3 class="panel-title">å†å²è®°å½•</h3>
        <div class="history-list" id="historyList">
            <div class="history-empty">æš‚æ— ç»ƒä¹ è®°å½•ï¼Œç­”å¯¹é¢˜ç›®åå°†ä¼šå‡ºç°åœ¨è¿™é‡Œ</div>
        </div>
        <!-- æ»‘åŠ¨æ˜¾ç¤ºçš„é«˜çº§æ¸…ç©º -->
        <div class="history-actions">
            <div class="history-stats">
                <span id="historyCount">0</span> æ¡è®°å½•
            </div>
            <button id="clearHistoryBtn" class="clear-history-btn" disabled>
                ğŸ—‘ï¸ æ¸…ç©º
            </button>
        </div>
    </div>
</aside>
</div>
<!-- åŸæœ‰çš„æ¨¡æ€æ¡†å’Œé®ç½© -->
<div id="rangeModal">
    <h3 style="margin:0 0 12px;font-size:16px;text-align:center">é€‰æ‹©éŸ³åŸŸ</h3>
    <label style="display:block;margin:6px 0;font-size:15px"><input type="radio" name="range" value="low" checked> C4 â€“ B4</label>
    <label style="display:block;margin:6px 0;font-size:15px"><input type="radio" name="range" value="mid"> C5 â€“ B5</label>
    <label style="display:block;margin:6px 0;font-size:15px"><input type="radio" name="range" value="all"> C4 â€“ B5</label>
    <div style="text-align:center;margin-top:14px"><button id="rangeOkBtn" style="padding:4px 14px;font-size:14px">ç¡®å®š</button></div>
</div>

<div id="rangeMask"></div>

<div id="settingsMask"></div>

<div id="settingsModal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:1002;">
    <div id="settingsBox" style="width:770px;height:630px;display:flex;background:var(--card);border-radius:24px;box-shadow:0 20px 60px var(--shadow);overflow:hidden;">
        <aside id="settingsMenu" style="flex:0 0 200px;border-right:1px solid var(--btn-sec);padding:30px 20px;">
            <button class="menuBtn active" data-panel="general">é€šç”¨</button>
            <button class="menuBtn" data-panel="sound">éŸ³è‰²</button>
            <button class="menuBtn" data-panel="about">å…³äº</button>
        </aside>
        <section id="settingsPanel" style="flex:1;padding:30px;"></section>
    </div>
</div>

<div id="toast" class="toast"></div>
    
<!-- ç§»åŠ¨ç«¯ä¸“å±å…ƒç´  -->
<div id="mobileElements">
  <!-- ç§»åŠ¨ç«¯æè¿°ä¿¡æ¯æ  -->
  <div id="mobileDescBar" class="mobile-desc-bar">
    <span id="mobileDescText">ç‚¹å‡»å¼€å§‹ç»ƒä¹ </span>
  </div>
  
  <!-- åº•éƒ¨å›ºå®šåŒºåŸŸç»„åˆ -->
  <div class="mobile-bottom-container">
    <!-- æ“ä½œæ  -->
    <div class="mobile-bottom-controls">
      <button class="mobile-control-btn setting-btn">è®¾ç½®</button>
      <button class="mobile-control-btn history-btn">å†å²è®°å½•</button>
    </div>
    
    <!-- å±æ€§ä¿¡æ¯æ  -->
    <div class="mobile-properties-panel">
      <div class="simple-properties">
        <div class="property-items">
          <div class="property-item-simple">
            <span class="property-label-simple">éŸ³é«˜ï¼š</span>
            <span class="property-value-simple" id="simplePitch">--</span>
          </div>
          <div class="property-item-simple">
            <span class="property-label-simple">åŸºå‡†éŸ³ï¼š</span>
            <span class="property-value-simple" id="simpleBaseNote">C4</span>
          </div>
          <div class="property-item-simple">
            <span class="property-label-simple">éŸ³ç¨‹åº¦æ•°ï¼š</span>
            <span class="property-value-simple" id="simpleInterval">--</span>
          </div>
        </div>
        <button class="expand-detail-btn">è¯¦ç»†</button>
      </div>
    </div>
  </div>

  <!-- ç§»åŠ¨ç«¯ä¾§æ»‘é¢æ¿ -->
<div id="mobileSidePanels">
    <!-- å·¦ä¾§è®¾ç½®é¢æ¿ -->
    <div id="mobileLeftPanel" class="mobile-side-panel left-panel">
      <div class="panel-header">
        <div class="panel-title">è®¾ç½®</div>
        <button class="panel-close">âœ•</button>
      </div>
      <div class="panel-content">
        <!-- è®¾ç½®å†…å®¹å°†ç”±JavaScriptåŠ¨æ€å¡«å…… -->
        <div class="mobile-panel-placeholder">
          <p>è®¾ç½®é€‰é¡¹åŠ è½½ä¸­...</p>
        </div>
      </div>
      <div class="mobile-panel-footer">
        <button class="panel-close">å…³é—­</button>
    </div>
    </div>
  
<!-- å³ä¾§å†å²é¢æ¿ -->
<div id="mobileRightPanel" class="mobile-side-panel right-panel">
  <div class="panel-header">
    <div class="panel-title">ç»Ÿè®¡ä¸å†å²</div>
    <button class="panel-close">âœ•</button>
  </div>
  <div class="panel-content">
    <!-- ç»Ÿè®¡ä¿¡æ¯åŒºåŸŸ -->
    <div class="mobile-stats-section">
      <h4 style="margin: 0 0 16px 0; color: var(--text);">ç»ƒä¹ ç»Ÿè®¡</h4>
      <div class="mobile-stat-list">
        <div class="mobile-stat-item">
          <span class="mobile-stat-label">ä»Šæ—¥ç»ƒä¹ :</span>
          <span class="mobile-stat-value" id="mobileTotalPlays">0é¢˜</span>
        </div>
        <div class="mobile-stat-item">
          <span class="mobile-stat-label">é¦–å‡»æ­£ç¡®:</span>
          <span class="mobile-stat-value" id="mobileCorrectCount">0é¢˜</span>
        </div>
        <div class="mobile-stat-item">
          <span class="mobile-stat-label">æ­£ç¡®ç‡:</span>
          <span class="mobile-stat-value" id="mobileAccuracyRate">0%</span>
        </div>
        <div class="mobile-stat-item">
          <span class="mobile-stat-label">å½“å‰è¿å‡»:</span>
          <span class="mobile-stat-value" id="mobileCurrentStreak">0è¿èƒœ</span>
        </div>
        <div class="mobile-stat-item">
          <span class="mobile-stat-label">æœ€é«˜è¿å‡»:</span>
          <span class="mobile-stat-value" id="mobileMaxStreak">0è¿èƒœ</span>
        </div>
      </div>
      
      <!-- æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯æŒ‰é’® -->
      <button id="mobileViewDetailsBtn" class="mobile-view-details-btn">
        ğŸ“ˆ æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
      </button>
    </div>

    <!-- å†å²è®°å½•åŒºåŸŸ - å®Œå…¨å¤ç”¨æ¡Œé¢ç«¯ç»“æ„ -->
    <div class="mobile-history-section" style="margin-top: 24px; border-top: 1px solid var(--btn-sec); padding-top: 20px;">
    <h4 style="margin: 0 0 16px 0; color: var(--text);">æœ€è¿‘è®°å½•</h4>
    <div class="history-list" id="mobileHistoryList">
        <div class="history-empty">æš‚æ— ç»ƒä¹ è®°å½•ï¼Œç­”å¯¹é¢˜ç›®åå°†ä¼šå‡ºç°åœ¨è¿™é‡Œ</div>
    </div>
    
    <!-- å†å²è®°å½•æ“ä½œæ  -->
    <div class="history-actions">
        <div class="history-stats">
            <span id="mobileHistoryCount">0</span> æ¡è®°å½•
        </div>
        <button id="mobileClearHistoryBtn" class="clear-history-btn" disabled>
            ğŸ—‘ï¸ æ¸…ç©º
        </button>
    </div>
</div>
  </div>
  <div class="mobile-panel-footer">
    <button class="panel-close">å…³é—­</button>
  </div>
</div>
    
    <!-- é®ç½©å±‚ -->
    <div id="mobilePanelOverlay" class="mobile-panel-overlay"></div>
  </div>
</div>

</body>
</html>